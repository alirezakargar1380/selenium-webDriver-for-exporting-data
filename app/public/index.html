<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" type="text/css" href="dataTable/datatables.min.css">
    <script type="text/javascript" charset="utf8" src="dataTable/datatables.min.js"></script>
    <title> alireza </title>
</head>
<body>
<div style="width: fit-content" class="mx-auto">
    <button class="w-100 bg" onclick="deleteAll()">DELETE ALL</button>
    <input id="one" placeholder="one" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="two" placeholder="two" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="three" placeholder="three" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="four" placeholder="four" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="five" placeholder="five" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="six" placeholder="six" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="seven" placeholder="seven" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="eight" placeholder="eight" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="nine" placeholder="nine" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="ten" placeholder="ten" class="mt-3 w-100" type="text"/>
    <br/>
    <input id="eleven" placeholder="eleven" class="mt-3 w-100" type="text"/>
    <br/>
    <button class="w-100 my-3" onclick="gnrate()">GRATE</button>
    <button class="w-100 mb-3" onclick="run()">RUN</button>
    <button class="w-100 mb-3" onclick="fileCreate()">Create File</button>
    <table id="table_id">
        <thead>
            <tr>
                <th>id</th>
                <th class="text-left">product</th>
                <th>checked_status</th>
                <th>code</th>
                <th>avalible</th>
            </tr>
        </thead>
        <tbody>
            {%PRODUCTNAME%}
        </tbody>
    </table>
</div>
</body>
<script>
    $(document).ready(function(){
        var text = document.querySelectorAll(".status");
        for (i = 0; i < text.length; i++) {
            if ( parseInt(text[i].innerHTML) === 0 ){
                text[i]
                    .setAttribute("class", "bg-danger");
            }
            if ( parseInt(text[i].innerHTML) === 1 ){
                text[i]
                    .setAttribute("class", "bg-success");
            }
            if ( text[i].innerHTML === "checked" ){
                text[i].setAttribute("class", "bg-dark");
            }
        }

        $('#table_id').DataTable();
    });

    function deleteAll() {
        $.ajax({
            type: "post",
            url: "/deleteAll",
            success: function (response) {
                location.reload();
            },
            error: function (error) {
                console.log(error)
            }
        })
    }

    function gnrate() {
        var data = {
            one: $("#one").val(),
            two: $("#two").val(),
            three: $("#three").val(),
            four: $("#four").val(),
            five: $("#five").val(),
            six: $("#six").val(),
            seven: $("#seven").val(),
            eight: $("#eight").val(),
            nine: $("#nine").val(),
            ten: $("#ten").val(),
            eleven: $("#eleven").val(),
        }
        $.ajax({
            type: "GET",
            url: "/genrateNums",
            dataType: "JSON",
            data: data,
            success: function (response) {
                console.log(response)
                location.reload();
            },
            error: function (error) {
                console.log(error)
            }
        })
    }

    function run() {
        $.ajax({
            type: "get",
            url: "/run",
            dataType: "JSON",
            data: { do: 1 },
            success: function (response) {
                console.log(response)
                // location.reload();
            },
            error: function (error) {
                console.log(error)
            }
        })
    }

    function fileCreate() {
        $.ajax({
            type: "get",
            url: "/getFile",
            dataType: "JSON",
            success: function (response) {
                console.log(response)
            },
            error: function (error) {
                console.log(error)
            }
        })
    }
</script>
</html>